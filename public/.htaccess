# -------------------------------------------------
# Enable rewrite engine
# -------------------------------------------------
<IfModule mod_rewrite.c>
  RewriteEngine On

  # -------------------------------------------------
  # Force HTTPS
  # -------------------------------------------------
  RewriteCond %{HTTPS} !=on
  RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>

# -------------------------------------------------
# Custom 404 page
# -------------------------------------------------
ErrorDocument 404 /404.html

# -------------------------------------------------
# Correct MIME types (Namecheap sometimes needs this)
# -------------------------------------------------
AddType application/javascript .js
AddType text/css .css
AddType image/svg+xml .svg

# -------------------------------------------------
# Disable directory listing (security)
# -------------------------------------------------
Options -Indexes

# -------------------------------------------------
# Cache static assets
# -------------------------------------------------
<IfModule mod_expires.c>
  ExpiresActive On

  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"

  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"

  ExpiresByType font/woff2 "access plus 1 year"
  ExpiresByType font/woff "access plus 1 year"
</IfModule>

# -------------------------------------------------
# Compression (if enabled on server)
# -------------------------------------------------
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE
    text/plain
    text/html
    text/css
    application/javascript
    application/json
    image/svg+xml
</IfModule>
